<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PhoenixxxTv Fancode Live</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@400;700&display=swap" />
    <style>
        /* ------------- STYLES UNCHANGED -------------- */
        :root {
            /* FanCode Red Theme */
            --bg-color: #0f0f0f;
            --text-color: #fff;
            --match-bg: #1e1e1e;
            --btn-primary-bg: #E53935;
            /* FanCode Red */
            --btn-primary-hover-bg: #B71C1C;
            --btn-primary-text: #fff;
            --status-live-color: #F44336;
            --title-color: #ffffff;
            --subtitle-color: #90A4AE;
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: 'Roboto', sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            text-align: center;
        }

        h1 {
            font-family: 'Teko', 'Roboto Condensed', sans-serif;
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0 0 6px;
            color: var(--title-color);
        }

        h2 {
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            font-weight: 400;
            margin: 0 0 24px;
            color: var(--subtitle-color);
        }

        .tabs {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            position: relative;
            margin-bottom: 24px;
            padding: 6px;
            border-bottom: 1px solid #333;
            padding-bottom: 12px;
        }

        .tab-btn {
            position: relative;
            background: transparent;
            border: 0;
            color: #aaa;
            padding: 10px 16px;
            border-radius: 0;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: .2s;
            overflow: hidden;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .tab-btn.active {
            background: transparent;
            color: #fff;
            box-shadow: none;
            border-bottom: 2px solid var(--btn-primary-bg);
        }

        .tab-indicator {
            display: none;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            background: rgba(255, 255, 255, 0.18);
            pointer-events: none;
            animation: ripple 600ms cubic-bezier(.2, .9, .2, 1);
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        #player-wrapper {
            max-width: 90%;
            margin: 10px auto 25px auto;
            display: none;
        }

        #player-wrapper .player-embed {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
        }

        #player-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            position: absolute;
            top: 0;
            left: 0;
        }

        .file-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .match-item {
            background: var(--match-bg);
            border-radius: 4px;
            /* FanCode has sharper corners */
            padding: 0;
            /* Remove padding for image flush */
            width: calc(25% - 20px);
            min-width: 250px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            transition: .2s;
            display: flex;
            flex-direction: column;
            position: relative;
            min-height: auto;
            /* Let content dictate height */
            overflow: hidden;
        }

        .match-item.active {
            border: 2px solid var(--btn-primary-bg);
            animation: none;
            /* Remove glow for cleaner look */
        }

        .match-item img {
            width: 100%;
            height: 180px;
            /* Fixed height for consistency */
            border-radius: 0;
            object-fit: cover;
        }

        .match-content {
            padding: 12px;
            text-align: left;
        }

        .match-item h3 {
            font-size: 1rem;
            margin: 0 0 10px;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            line-height: 1.3;
        }

        .badge {
            position: absolute;
            top: 10px;
            padding: 4px 8px;
            font-size: 0.7em;
            border-radius: 0;
            font-weight: 700;
            text-transform: uppercase;
        }

        .badge-category {
            left: 0;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
        }

        .badge-status {
            right: 10px;
            background: var(--status-live-color);
            color: #fff;
            border-radius: 2px;
        }

        /* Animations */
        @keyframes pulse-red {
            0% {
                box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(229, 57, 53, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(229, 57, 53, 0);
            }
        }

        @keyframes border-scan {
            0% {
                border-color: #E53935;
                box-shadow: 0 0 5px #E53935;
            }

            50% {
                border-color: #ff8a80;
                box-shadow: 0 0 15px #E53935;
            }

            100% {
                border-color: #E53935;
                box-shadow: 0 0 5px #E53935;
            }
        }

        .stream-button {
            padding: 10px;
            margin-top: auto;
            background: transparent;
            color: var(--btn-primary-bg);
            border: 1px solid var(--btn-primary-bg);
            border-radius: 4px;
            font-size: 0.9rem;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stream-button:hover {
            background: var(--btn-primary-bg);
            color: white;
            box-shadow: 0 0 10px rgba(229, 57, 53, 0.5);
        }

        /* Animated Pulse for Watch Now */
        .stream-button:not([disabled]) {
            animation: pulse-red 2s infinite;
        }

        .match-item.active-match {
            animation: border-scan 2s infinite alternate;
            border: 1px solid #E53935;
        }

        /* ... existing footer ... */
        footer {
            padding: 20px 10px;
            margin-top: 36px;
            font-family: 'Montserrat', sans-serif;
            background: #111;
            color: #fff;
        }

        /* JS Updates for Logic */
        <script> // ... existing disclaimer ...

        // ... existing vars ...

        function playMatch(link, element) {
            if ( !link) return;

            // Highlight Active Match
            document.querySelectorAll('.match-item').forEach(el=> el.classList.remove('active-match'));
            if(element) element.classList.add('active-match');

            playerIframe.src=proxyBaseURL+encodeURIComponent(link);
            playerWrapper.style.display='block';

            playerWrapper.scrollIntoView({
                behavior:'smooth'
            });
        activeStreamLink=link;
        }

        // ... existing fetchData ...

        function render() {
            container.innerHTML='';
            let list=allMatches;

            if(currentFilter !=='all') {
                list=allMatches.filter(m=> (m.status || '').toUpperCase()===currentFilter);
            }

            if( !list.length) {
                container.innerHTML='<div style="padding:24px;">No matches found for this filter.</div>';
                return;
            }

            list.forEach(m=> {
                    const div=document.createElement('div');
                    div.className='match-item';

                    // Check if this is the currently playing match to re-apply highlight
                    if(activeStreamLink && getStreamLink(m)===activeStreamLink) {
                        div.classList.add('active-match');
                    }

                    const img=m.src || 'https://via.placeholder.com/400x225?text=No+Image';
                    const status=(m.status || '').toUpperCase();
                    const statusClass=status==='LIVE' ? '' : 'upcoming';
                    const link=getStreamLink(m);
                    const has= ! !link;

                    div.innerHTML=` <span class="badge badge-category" >$ {
                        m.event_category || 'Other'
                    }

                    </span> <span class="badge badge-status ${statusClass}" >$ {
                        status || 'N/A'
                    }

                    </span> <img src="${img}" alt="${(m.title || 'Match').replace(/" /g, '')
            }

            ">
 <div class="match-content"><h3>$ {
                m.title || 'Match Title'
            }

            </h3></div><button class="stream-button"$ {
                has ? '': 'disabled'
            }

            >$ {
                has ? 'Watch Now': 'No Stream'
            }

            </button>`;

            if (has) {
                div.addEventListener('click', ()=> playMatch(link, div));
                const btn=div.querySelector('.stream-button');

                btn.addEventListener('click', (e)=> {
                        e.stopPropagation();
                        playMatch(link, div);
                    });
            }

            container.appendChild(div);
        });
        }

        // ... existing ...

        /* --------- Disclaimer styles from second code ---------- */
        .disclaimer-button {
            width: 100%;
            background-color: #ff9800;
            color: white;
            padding: 10px;
            border: none;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
        }

        .disclaimer-box {
            display: none;
            background-color: #fff3cd;
            color: #856404;
            padding: 20px;
            position: relative;
            border-bottom: 2px solid #ff9800;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #856404;
        }
    </style>
</head>

<body>
    <!-- Disclaimer -->
    <button class="disclaimer-button" onclick="showDisclaimer()">Must Read Disclaimer</button>
    <div class="disclaimer-box" id="disclaimerBox">
        <button class="close-btn" onclick="closeDisclaimer()">√ó</button>
        <p><strong>Disclaimer:</strong><br>
            This Fancode web page is completely <strong>free</strong> to use. <strong>You do not need to pay</strong>
            any money to anyone for access.<br><br>
            If someone has asked you for money or taken money in exchange for providing this page, <strong>you have been
                scammed</strong>.<br><br>
            Please report such cases here: <a href="https://instagram.com/_l__a__k__s__h__m__a__n_" target="_blank"
                style="color:blue;">LAKSHMAN REDDY</a>
        </p>
    </div>

    <h1>PhoenixxxTv Fancode Live</h1>
    <h2>Made with ‚ô•Ô∏è by Lakshman</h2>

    <!-- Filter Tabs -->
    <div class="tabs" id="tabs">
        <button class="tab-btn active" data-filter="all">All Matches</button>
        <button class="tab-btn" data-filter="LIVE">Live Now</button>
        <button class="tab-btn" data-filter="UPCOMING">Upcoming</button>
        <div class="tab-indicator" id="tabIndicator"></div>
    </div>

    <!-- Player -->
    <div id="player-wrapper">
        <div class="player-embed">
            <iframe id="dynamic-player" allowfullscreen></iframe>
        </div>
    </div>

    <div class="file-container" id="matches"></div>

    <footer>¬©Lakshman 2025 | All Rights Reserved</footer>


    <script>
        // ---------- Disclaimer functions ----------
        function showDisclaimer() {
            document.getElementById('disclaimerBox').style.display = 'block';
        }
        function closeDisclaimer() {
            document.getElementById('disclaimerBox').style.display = 'none';
        }

        const apiURL = 'https://raw.githubusercontent.com/drmlive/fancode-live-events/main/fancode.json';
        const container = document.getElementById('matches');
        const playerWrapper = document.getElementById('player-wrapper');
        const playerIframe = document.getElementById('dynamic-player');

        // üîπ use internal player with ?stream=
        const proxyBaseURL = './player.html?stream=';

        let allMatches = [];
        let activeStreamLink = null;
        let currentFilter = 'all';

        function getStreamLink(m) {
            return m.dai_url || m.url || (m.stream && m.stream.url) || null;
        }

        function playMatch(link) {
            if (!link) return;
            playerIframe.src = proxyBaseURL + encodeURIComponent(link);
            playerWrapper.style.display = 'block';
            playerWrapper.scrollIntoView({ behavior: 'smooth' });
            activeStreamLink = link;
        }

        async function fetchData() {
            try {
                const res = await fetch(apiURL, { cache: 'no-store' });
                const data = await res.json();
                allMatches = data.matches || [];
                render();
            } catch (e) {
                console.error(e);
                container.innerHTML = '<div style="padding:24px;">Failed to fetch live matches.</div>';
            }
        }
        fetchData();
        setInterval(fetchData, 180000);

        function render() {
            container.innerHTML = '';
            let list = allMatches;
            if (currentFilter !== 'all') {
                list = allMatches.filter(m => (m.status || '').toUpperCase() === currentFilter);
            }

            if (!list.length) {
                container.innerHTML = '<div style="padding:24px;">No matches found for this filter.</div>';
                return;
            }

            list.forEach(m => {
                const div = document.createElement('div');
                div.className = 'match-item';

                const img = m.src || 'https://via.placeholder.com/400x225?text=No+Image';
                const status = (m.status || '').toUpperCase();
                const statusClass = status === 'LIVE' ? '' : 'upcoming';
                const link = getStreamLink(m);
                const has = !!link;

                div.innerHTML = `
      <span class="badge badge-category">${m.event_category || 'Other'}</span>
      <span class="badge badge-status ${statusClass}">${status || 'N/A'}</span>
      <img src="${img}" alt="${(m.title || 'Match').replace(/"/g, '')}">
      <h3>${m.title || 'Match Title'}</h3>
      <button class="stream-button" ${has ? '' : 'disabled'}>
        ${has ? 'Watch Now' : 'No Stream'}
      </button>
    `;

                if (has) {
                    div.addEventListener('click', () => playMatch(link));
                    const btn = div.querySelector('.stream-button');
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        playMatch(link);
                    });
                }

                container.appendChild(div);
            });
        }

        /* Tabs */
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                currentFilter = btn.dataset.filter;
                document.querySelectorAll('.tab-btn').forEach(x => x.classList.remove('active'));
                btn.classList.add('active');
                render();
            });
        });
    </script>

    <!-- Extra protection / devtools blocker from second code -->
    <script>
        // Disable right-click
        document.addEventListener('contextmenu', e => e.preventDefault());

        // Block common devtools key combos
        document.addEventListener('keydown', function (e) {
            const key = e.key || e.keyIdentifier || String.fromCharCode(e.keyCode);
            // F12
            if (e.key === 'F12') { e.preventDefault(); e.stopPropagation(); return false; }
            // Ctrl+Shift+I / Ctrl+Shift+C / Ctrl+Shift+J
            if (e.ctrlKey && e.shiftKey && ['I', 'C', 'J'].includes((key + '').toUpperCase())) {
                e.preventDefault(); e.stopPropagation(); return false;
            }
            // Ctrl+U (view-source), Ctrl+S (save), Ctrl+Shift+S
            if (e.ctrlKey && ['u', 's'].includes((key + '').toLowerCase())) {
                e.preventDefault(); e.stopPropagation(); return false;
            }
        });

        // Very simple devtools detector (heuristic)
        (function () {
            let devtoolsOpen = false;
            const threshold = 160; // adjust if needed
            setInterval(() => {
                const widthDiff = window.outerWidth - window.innerWidth;
                const heightDiff = window.outerHeight - window.innerHeight;
                if (widthDiff > threshold || heightDiff > threshold) {
                    if (!devtoolsOpen) {
                        devtoolsOpen = true;
                        // an action to discourage: hide content or show stern message
                        document.documentElement.style.filter = 'blur(6px)';
                        console.warn('DevTools detected ‚Äî content blurred.');
                    }
                } else {
                    if (devtoolsOpen) {
                        devtoolsOpen = false;
                        document.documentElement.style.filter = '';
                        console.info('DevTools closed.');
                    }
                }
            }, 800);
        })();
    </script>

</body>

</html>
